# java-kanban

Проект представляет собой бекенд для системы управления задачами с поддержкой эпиков, подзадач, истории просмотров и синхронизацией через HTTP-сервер.

## Основные особенности

### Типы задач
1. **Задача (Task)**  
   - Свойства: ID, название, описание, статус.
2. **Эпик (Epic)**  
   - Содержит подзадачи. Статус эпика определяется статусами его подзадач.
3. **Подзадача (Subtask)**  
   - Привязана к эпику. Статус влияет на статус родительского эпика.

### Статусы задач
- `NEW` — задача создана, но не начата.
- `IN_PROGRESS` — задача в процессе выполнения.
- `DONE` — задача завершена.

## Менеджеры задач

### `TaskManager` (Интерфейс)
Методы для управления задачами:
- CRUD операции для задач/эпиков/подзадач.
- Получение списка подзадач эпика.
- Автоматическое обновление статусов эпиков.
- История просмотров задач (`getHistory()`).

#### Реализации:
1. **`InMemoryTaskManager`**  
   Хранение данных в оперативной памяти.
   
2. **`FileBackedTasksManager`**  
   Наследует `InMemoryTaskManager`.  
   Автосохранение в CSV-файл при изменениях.  
   Методы:
   - `save()` — сохраняет состояние в файл.
   - `loadFromFile(File file)` — восстанавливает данные из файла.

3. **`HttpTaskManager`**  
   Наследует `FileBackedTasksManager`.  
   Синхронизация с сервером через `KVTaskClient`.  
   Использует эндпоинты HTTP-сервера для работы с задачами.

---

## История просмотров (`HistoryManager`)
- Отслеживает последние 10 уникальных просмотров задач.
- **Интерфейс**:
  - `add(Task task)` — добавляет/обновляет задачу в истории.
  - `remove(int id)` — удаляет задачу из истории.
  - `getHistory()` — возвращает историю в порядке просмотра.

### Реализация: `InMemoryHistoryManager`
- **`CustomLinkedList` + `HashMap`**  
  - Связный список для сохранения порядка.
  - Хеш-таблица для быстрого доступа к узлам (O(1) при удалении).
- При удалении задачи через менеджер она автоматически удаляется из истории.

---

## HTTP-сервер и клиент
### Сервер (`HttpTaskServer`)
- Порт: 8080.
- **Эндпоинты**:
   - GET /tasks/task — все задачи
   - GET /tasks/epic — все эпики
   - POST /tasks/task — создать задачу
   - DELETE /tasks/task?id=1 — удалить задачу
   - GET /tasks/history — история просмотров
- Использует **Gson** для сериализации в JSON.

### Хранилище (`KVServer`)
- Порт: 8078.
- **Методы**:
- `save(key, json)` — сохраняет данные.
- `load(key)` — возвращает данные по ключу.

### Клиент (`KVTaskClient`)
- Регистрация через API_TOKEN.
- Интеграция с `HttpTaskManager`.

---

## Утилитарный класс `Managers`
- `getDefault()` — возвращает `HttpTaskManager`.
- `getDefaultHistory()` — возвращает `InMemoryHistoryManager`.





